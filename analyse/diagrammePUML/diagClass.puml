@startuml
title Diagramme de classes - Application de débruitage d'images

class Image {
  - bufferedImage: BufferedImage
  - width: int
  - height: int
  + getBufferedImage(): BufferedImage
  + getWidth(): int
  + getHeight(): int
  + load(path: String): void
  + save(path: String): void
  + extractPatches(s: int): PatchSet
  + decoupe(W: int, n: int): List<ImageZone>
  + applyNoise(sigma: double): Image
  + reconstructFromPatches(p: PatchSet): Image
}

class Main {
  + main(args: String[]): void
}

class Patch {
  - data: double[][]
  - positionX: int
  - positionY: int
  + toVector(): double[]
  + fromVector(v: double[]): Patch
}

class PatchSet {
  - patches: List<Patch>
  - origine: String
  + getPatches(): List<Patch>
  + size(): int
  + mean(): double[]
  + covariance(): double[][]
}

class ACP {
  - patchSet: PatchSet
  + compute(): double[][]
  + project(Vc: List<double[]>): double[][]
}

class Thresholding {
  - patch: Patch
  + visuThreshold(sigma: double, size: int): double
  + bayesThreshold(sigma: double, sigmaSignal: double): double
  + hard(lambda: double, x: double): double
  + soft(lambda: double, x: double): double
}

class Evaluation {
  - original: Image
  - processed: Image
  + mse(): double
  + psnr(): double
}

class ImageZone {
  - image: Image
  - x: int
  - y: int
  + getImage(): Image
  + getPosition(): (int, int)
}

class Interface {
  - controller: Main
  + displayImage(img: Image)
  + displayResults(mse: double, psnr: double, gain: double)
  + getParameters(): Parameters
  + applyDenoising(): void
}

class Parameters {
  + sigma: double
  + patchSize: int
  + extractionMode: String
  + thresholdType: String
  + zoneSize: int
}

' Relations
Main --> Interface
Main --> Image

Image "1" *-- "many" ImageZone
Image "1" *-- "many" Patch
Image "1" *-- "1" Evaluation

PatchSet "1" *-- "many" Patch
PatchSet --> ACP
PatchSet --> Thresholding

Interface ..> Parameters : utilise

Evaluation --> Image : évalue
ACP --> PatchSet : traite
Thresholding --> Patch : seuille

note top of Image
  Encapsule toutes les fonctionnalités
  liées au traitement d'image
end note

note top of PatchSet
  Contient l'ensemble des patches
  et fournit des méthodes statistiques
end note

@enduml
